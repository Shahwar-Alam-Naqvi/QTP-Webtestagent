import os
from dotenv import load_dotenv
import logging

load_dotenv()

"""
Configuration file for setting up environment variables for OpenAI, Azure OpenAI, and AWS Bedrock.
This file sets up the necessary configurations, keys, and endpoint mappings required for interacting with different AI services.
"""
# OpenAI and AzureOpenAI
OPENAI_API_TYPE = os.environ.get("OPENAI_API_TYPE", "azure")
"""
str: Type of API being used, either 'openai' or 'azure'. Defaults to 'azure'.
"""

AZURE_OPENAI_ENDPOINTS = os.environ.get("AZURE_OPENAI_ENDPOINTS", None)
"""
str or None: Comma-separated list of Azure OpenAI endpoints if available.
"""

AZURE_OPENAI_KEYS = os.environ.get("AZURE_OPENAI_KEYS", None)
"""
str or None: Comma-separated list of Azure OpenAI keys if available.
"""

AZURE_OPENAI_ENDPOINTS_KEYS = []
"""
list: List of lists containing endpoint and key pairs for Azure OpenAI, if available.
"""

if AZURE_OPENAI_ENDPOINTS and AZURE_OPENAI_KEYS:
    AZURE_OPENAI_ENDPOINTS = AZURE_OPENAI_ENDPOINTS.split(",")
    AZURE_OPENAI_KEYS = AZURE_OPENAI_KEYS.split(",")
    logging.info(f"AZURE OPENAI KEYS AVAILABLE.")
    AZURE_OPENAI_ENDPOINTS_KEYS = [[
        AZURE_OPENAI_ENDPOINTS[i], AZURE_OPENAI_KEYS[i]
    ] for i in range(len(AZURE_OPENAI_ENDPOINTS))]

OPENAI_API_KEY = os.environ.get(
    "OPENAI_API_KEY", None)  # pass if using OpenAI and not AzureOpenAI
"""
str or None: API key for OpenAI, if using OpenAI API.
"""

AZURE_DEPLOYMENT_MAPS = os.environ.get(
    "AZURE_DEPLOYMENT_MAPS", None
)  # should be like this gpt-4-vision-preview:gpt4128kV,gpt-3.5-turbo-1106:gpt3516k,gpt-4-1106-preview:gpt4128k,gpt-4o:gpt4ogs
AZURE_DEPLOYMENT_NAMES = None
"""
dict or None: Dictionary mapping model names to deployment names for Azure OpenAI, if available.
"""

if AZURE_DEPLOYMENT_MAPS:
    AZURE_DEPLOYMENT_NAMES = dict(
        obj.split(":") for obj in AZURE_DEPLOYMENT_MAPS.split(","))
    logging.info(f"MODEL DEPLOYMENT NAMES: {AZURE_DEPLOYMENT_NAMES}")

OPENAI_API_VERSION = os.environ.get("OPENAI_API_VERSION")
"""
str or None: API version for OpenAI, if specified.
"""

# Bedrock
AWS_BEDROCK_ACCESS_KEY = os.environ.get("AWS_BEDROCK_ACCESS_KEY")
"""
str or None: AWS Bedrock access key, if specified in environment variables.
"""

AWS_BEDROCK_SECRET_KEY = os.environ.get("AWS_BEDROCK_SECRET_KEY")
"""
str or None: AWS Bedrock secret key, if specified in environment variables.
"""

AWS_BEDROCK_REGION = os.environ.get("AWS_BEDROCK_REGION")
"""
str or None: AWS Bedrock region, if specified in environment variables.
"""

# Global
MODEL_RETRIES = int(os.environ.get("LLM_RETRIES", 4))
"""
int: Number of retries allowed for model requests. Defaults to 4 if not specified in environment variables.
"""

